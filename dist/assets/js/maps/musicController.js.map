{"version":3,"sources":["musicController.js"],"names":["MusicController","init","changeMusic","index","num","playInfo","musicInfo","musicName","html","musicUser","musicPlayInfo","find","width","music1Box","attr","src","musicList","removeClass","eq","addClass","changeBar","music","pause","seconds","minute","sec","time","initCanvas","musicBkNum","musicBkSoure","$at","PictureSoure","clearInterval","musicBox2","setInterval","CanvasMove","boxEvent","hammer","Hammer","document","getElementById","on","e","$","stop","animate","left","tip","musicTip","musicBol","musicPage","fadeOut","fadeIn","show","hide","ListInit","str","i","length","this","selectIndex","parseInt","play","playEvent","playInter","pre","next","domEvent","musicBtn","instance"],"mappings":"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","file":"../musicController.js","sourcesContent":["var MusicController = (function(){\r\n\tvar instance;\r\n\tvar musicBol = true;\r\n\tvar num=0;\r\n\tvar selectIndex=0;\r\n\tvar playInter;\r\n\tvar musicBox2;\r\n\tvar musicTip = $(\"#musicTip\");\r\n\tvar musicList = $(\"#musicList ul\");\r\n\tvar musicName = $(\"#musicName\");\r\n\tvar musicUser = $(\"#musicUser\");\r\n\tvar music1Box = $(\"#music1Box\");\r\n\tvar musicPlayInfo = $(\"#musicInfo\");\r\n\tvar musicPage = $(\".music\");\r\n\t\r\n\t\r\n\tvar musicInfo = [[\"AAAAAAAAA\",\"aaaaaa\"],[\"BBBBBBBBB\",\"bbbbbbbb\"],[\"CCCCCCCCC\",\"cccccccc\"],[\"DDDDDDDD\",\"ddddddd\"],[\"EEEEEEEE\",\"eeeeeee\"]]\r\n\tfunction init(){\r\n\t\tvar music = {};\r\n\t\tmusic.tip = function(){\r\n\t\t\tmusicTip.on(\"click\",function(){\r\n\t\t\t\tif(musicBol){\r\n\t\t\t\t\tmusicPage.eq(0).fadeOut();\r\n\t\t\t\t\tmusicPage.eq(1).fadeIn();\r\n\t\t\t\t\tmusicTip.find(\".tipTitle\").eq(1).show();\r\n\t\t\t\t\tmusicTip.find(\".tipTitle\").eq(0).hide();\r\n\t\t\t\t\tmusicTip.find(\".tipTitle\").animate({\"left\":\"50%\"});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmusicPage.eq(0).fadeIn();\r\n\t\t\t\t\tmusicPage.eq(1).fadeOut();\r\n\t\t\t\t\tmusicTip.find(\".tipTitle\").eq(0).show();\r\n\t\t\t\t\tmusicTip.find(\".tipTitle\").eq(1).hide();\r\n\t\t\t\t\tmusicTip.find(\".tipTitle\").animate({\"left\":\"0%\"});\r\n\t\t\t\t}\r\n\t\t\t\tmusicBol = !musicBol;\r\n\t\t\t})\r\n\t\t}\r\n\t\tmusic.ListInit = function(){\r\n\t\t\tvar str='';\r\n\t\t\tfor (var i=0;i<musicInfo.length;i++) {\n\t\t\t\tstr += '<li><p>0'+(i+1)+'</p>'\r\n\t\t\t\tstr += '<img src=\"assets/img/music/head'+(i+1)+'.png\" />'\r\n\t\t\t\tstr += '<span>'+musicInfo[i][0]+'<strong>/'+musicInfo[i][1]+'</strong></span>'\r\n\t\t\t\tstr += '<img src=\"assets/img/music/musicRight.png\" class=\"musicRight\"/></li>'\r\n\t\t\t\t\n\t\t\t}\r\n\t\t\tmusicList.html(str);\r\n\t\t\tmusicList.on(\"click\",\"li\",function(){\r\n\t\t\t\tvar index = musicList.find(\"li\").index($(this));\r\n\t\t\t\tselectIndex = (parseInt(index))%5;\r\n\t\t\t\tchangeMusic(selectIndex);\r\n\t\t\t})\r\n\t\t\tchangeMusic(0);\r\n\t\t\tinitCanvas();\r\n\t\t\tboxEvent()\r\n\t\t}\r\n\t\tmusic.play = function(){\r\n\t\t\t$(\".musicImg\").eq(1).removeClass(\"musicPause\");\r\n\t\t\tclearInterval(playInter);\r\n\t\t\tplayInter = setInterval(playEvent,1000);\r\n\t\t\tfunction playEvent(){\r\n\t\t\t\tnum++\r\n\t\t\t\tchangeBar(num);\r\n\t\t\t}\r\n\t\t}\r\n\t\tmusic.pause = function(){\r\n\t\t\t$(\".musicImg\").eq(1).addClass(\"musicPause\");\r\n\t\t\tclearInterval(playInter);\r\n\t\t}\r\n\t\tmusic.pre = function(){\r\n\t\t\tselectIndex--;\r\n\t\t\tif(selectIndex<0){\r\n\t\t\t\tselectIndex=musicInfo.length-1;\r\n\t\t\t}\r\n\t\t\tchangeMusic(selectIndex);\r\n\t\t}\r\n\t\tmusic.next = function(){\r\n\t\t\tselectIndex++;\r\n\t\t\tif(selectIndex>musicInfo.length-1){\r\n\t\t\t\tselectIndex=0\r\n\t\t\t}\r\n\t\t\tchangeMusic(selectIndex);\r\n\t\t}\r\n\t\tmusic.domEvent = function(){\r\n\t\t\tvar musicBtn = $(\"#musicController\");\r\n\t\t\tmusicBtn.find(\".play\").on(\"click\",function(){\r\n\t\t\t\t$(this).hide();\r\n\t\t\t\tmusicBtn.find(\".pause\").show()\r\n\t\t\t\tmusic.play();\r\n\t\t\t})\r\n\t\t\tmusicBtn.find(\".pause\").on(\"click\",function(){\r\n\t\t\t\t$(this).hide();\r\n\t\t\t\t$(\".musicRound\").removeClass(\"musicRoundAnimate\").addClass(\"musicRoundAnimate\")\r\n\t\t\t\tmusicBtn.find(\".play\").show()\r\n\t\t\t\tmusic.pause();\r\n\t\t\t})\r\n\t\t\tmusicBtn.find(\".pre\").on(\"click\",function(){\r\n\t\t\t\tmusic.pre();\r\n\t\t\t})\r\n\t\t\tmusicBtn.find(\".next\").on(\"click\",function(){\r\n\t\t\t\tmusic.next();\r\n\t\t\t})\r\n\t\t}\r\n\t\tfunction changeMusic(index){\r\n\t\t\tnum=0;\r\n\t\t\tvar playInfo = musicInfo[index];\r\n\t\t\tmusicName.html(playInfo[0]);\r\n\t\t\tmusicUser.html(playInfo[1]);\r\n\t\t\tmusicPlayInfo.find(\".bar\").width(\"0%\");\r\n\t\t\tmusicPlayInfo.find(\"p\").html(\"00:00:00\");\r\n\t\t\tmusic1Box.find(\".head\").attr({\"src\":\"assets/img/music/head\"+(index+1)+\".png\"});\r\n//\t\t\t\tvar randomTime = \"00:0\"+parseInt(Math.random()*5)+\":0\"+parseInt(Math.random()*9)\r\n\t\t\tmusicPlayInfo.find(\"span\").html(\"00:03:00\"); \r\n\t\t\tmusicList.find(\"li\").removeClass(\"selected\");\r\n\t\t\tmusicList.find(\"li\").eq(index).addClass(\"selected\");\r\n\t\t\t\r\n\t\t}\r\n\t\tfunction changeBar(num){\r\n\t\t\tif(num >= 180){\r\n\t\t\t\tmusic.pause();\r\n\t\t\t}\r\n\t\t\tvar seconds = num%60;\r\n\t\t\tvar minute = (num-seconds)/60;\r\n\t\t\tvar sec=\"\";\r\n\t\t\tseconds<10?sec = \"0\"+seconds:sec = seconds;\r\n\t\t\tvar time = \"00:0\"+minute+\":\"+sec;\r\n\t\t\tmusicPlayInfo.find(\".bar\").width((num/1.8)+\"%\");\r\n\t\t\tmusicPlayInfo.find(\"p\").html(time);\r\n\t\t}\r\n\t\tfunction initCanvas(){\r\n\t\t\tvar musicBkNum=0;\r\n\t\t\tvar musicBkSoure = $at.PictureSoure(\"assets/img/musicCanvas/s2_00\",49,98); \r\n\t\t\tclearInterval(musicBox2);\r\n\t\t\tmusicBox2 = setInterval(function(){\r\n\t\t\t\tmusicBkNum++\r\n\t\t\t\tmusicBkNum == 49?musicBkNum=0:musicBkNum=musicBkNum;\r\n\t\t\t\t$at.CanvasMove(musicBkSoure[musicBkNum],1080,570,\"musicBk\");\r\n\t\t\t},50)\r\n\t\t}\r\n\t\tfunction boxEvent(){\r\n\t\t\tvar hammer = new Hammer(document.getElementById(\"event\"));\r\n\t\t\thammer.on(\"swipeleft\", function (e) {\r\n\t\t\t\t$(\"#music1Box\").stop().animate({\"left\":\"-1080px\"})\r\n\t\t\t\t$(\".roundBk\").removeClass(\"selected\")\r\n\t\t\t\t$(\".roundBk\").eq(1).addClass(\"selected\")\r\n\t\t\t})\r\n\t\t\thammer.on(\"swiperight\", function (e) {\r\n\t\t\t\t$(\"#music1Box\").stop().animate({\"left\":\"0px\"})\r\n\t\t\t\t$(\".roundBk\").removeClass(\"selected\")\r\n\t\t\t\t$(\".roundBk\").eq(0).addClass(\"selected\")\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn music;\r\n\t}\r\n\treturn function(){\r\n\t\tif(!instance){\r\n\t\t\tinstance = init();\r\n\t\t}\r\n\t\treturn instance;\r\n\t}\r\n})()\r\n"]}